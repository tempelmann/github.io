---
layout: post
title: Understanding bugs in Xojo, or not getting them fixed
date: '2019-05-11T16:54:00.001+01:00'
author: Thomas Tempelmann
tags:
- Xojo
modified_time: '2019-05-11T17:09:45.430+01:00'
blogger_id: tag:blogger.com,1999:blog-8797526579651167122.post-1068289182974492955
blogger_orig_url: https://blog.tempel.org/2019/05/understanding-bugs-in-xojo-or-not.html
---

<span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">A former employee of <a href="http://xojo.com/" target="_blank">Xojo Inc.</a> once met with an Apple Developer Support (DTS) engineer, looking over some code. The Apple engineer saw a note mentioning my name and told the Xojo employee: You know Thomas Tempelmann? I know him, too:&nbsp;<span style="background-color: white;">"He's the best type of user, the one that debugs a problem so far so that he tells you exactly what you're doing wrong, and how to fix it."</span></span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;"><br /></span><span style="background-color: white;">I'm not infallible, but I believe I can claim that I have quite some experience and understanding of a lot of things under a computer's hood. After all, I've been doing this for nearly 40 years. I'm not so great with abstract algorithms, but when it comes to writing efficient code or debugging it, I'm surely not the best, but have skills that are well above average.</span></span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;"><br /></span><span style="background-color: white;">And I've proven that a lot of times with a development system I really love to use: Xojo, formerly known as REALbasic.</span></span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;"><br /></span><span style="background-color: white;">I've been using Xojo (or RB) for about 20 years now. I've been one of the first to write plugins for it, and they were quite popular (the plugins eventually became part of the MBS plugins).</span></span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;"><br /></span><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;">Here are a few examples of bugs and solutions I found in Xojo:</span></span></span><br /><span style="font-family: Arial, Helvetica, sans-serif;"><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;"><br /></span></span></span><ul><li style="font-family: arial, helvetica, sans-serif;"><span style="font-family: Arial, Helvetica, sans-serif;"><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;">Back when we still used 68k CPUs, there was a serious issue that only a few customers had: Their apps crashed when they got large. I had some suspicions, looked at the compiled code and soon found the issue - an overflow with a 16 bit offset in a jmp instruction. Worth noting here was that previously the Xojo engineers were not able to find the bug. Yet I, without even having the source code, found it within an hour or so. Because I wrote a 68k compiler once myself and knew what could go wrong. I also like to point out that Xojo's current EULA prohibits us from looking at the compiled code the way I did, in order to learn how it works. I later argued against that, even mentioning this example where I had to do that because no one else was able to do find the bug, to no avail. This was not the last time I had to dig into Xojo's code in order to work around a bug when Xojo refused to look into it, and solved the issue for myself, but I can't publish them any more to the benefit of others because, well, Xojo's EULA and the threat it emcompasses.</span></span></span></li><li><span style="font-family: Arial, Helvetica, sans-serif;"><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;">In 2008, I ran into a very rare case where I'd lose some data when I had 10,000s of objects in a particular data structure (WeakRefs, IIRC). Turned out that the internal dictionary code did not handle collisions correctly. After proposing a code change, the reproducible issue was gone. I had to personally pursue this issue down into the code because, again, the resposible engineer (who was, admittedly, not its original author) did not even believe in the problem I described. Regardless, I was able to get the fix into the framework due to some lucky circumstances, for all of us.</span></span></span></li><li><span style="font-family: Arial, Helvetica, sans-serif;"><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;">The Xojo IDE's Back (History) button does not work reliably, since 2013 when this IDE was introduced. More often than not, the Back button simply does not go back to previously visited locations. I have then, as a proof-of-concept, written an external program that talks to the IDE via the IDE communication socket, regularly requesting the current location, and offering a list with the history. You can then click any history item and the IDE actually jumps back to it. Surprisingly, this works more reliably than the IDE's own back button. Yet, when Xojo CEO Geoff Perlman was recently asked at the MBS conference in Munich about this shortcoming, he insisted that this is a very complex matter that is not easy to solve. I find that hard to believe if even I can do better with an external program.</span></span></span></li><li><span style="font-family: Arial, Helvetica, sans-serif;"><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;">Xojo code can use Threads, but can run them only cooperatively, not concurrently. That's because the runtime functions are not using locking to protect the sensitive operations such as object creation against interruption by another thread. Thus, Xojo's runtime has its own thread scheduler that uses semaphores to make sure only one Xojo thread runs at any time. Now, there are cases where we users need to use Declare statements to invoke OS-provided functions. Some of them may even call back into our own Xojo functions. But if those callbacks happen on threads that Xojo does not control, this can lead to crashes when our Xojo code then accesses Xojo objects. I've come up with a proposal to make this safe, effectively by using locks that suspect the callback task until Xojo is in a safe state. Apart from the possibility of creating a deadlock (which is under the control of the programmer), I was able to supply a demo project that yet has to be proven not to be stable. Xojo, however, ignores all my explanations and demonstrations and simply keeps telling their users that this can't ever be safe.</span></span></span></li><li><span style="font-family: Arial, Helvetica, sans-serif;"><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;">Related to callbacks, there's also a long-known issue with passing function addresses to the OS. This is done by creating a so-called delegate object via the AddressOf operator. The delegate object can be used inside Xojo like a function variable, i.e. one can store the address of a function in a property and call it later. This even works for object instance methods, i.e. methods that are part of an object and have a "self" reference. This self reference is simply a pointer ot the object that gets passed to it when it's invoked from an object. A delegate stores this object reference and passes it to the function if necessary. However, when passing such as delegate to a OS function (via Declare), then Xojo does not pass a pointer into the stub function that sets up the self reference but instead passes the target function address. That means that if the callback is invoked, the self reference is not properly set up, leading to a crash. The issue is known for long, and in the past bug reports of this kind have been closed as "works as designed". Since this could be fixed, the official answer sounds like an excuse for "we don't like to deal with it" or "we don't really care" to me.</span></span></span></li></ul><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;"><br /></span></span><span style="font-family: &quot;verdana&quot; , &quot;tahoma&quot; , &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="background-color: white;">All this shows that there are a lot of things in Xojo, mostly low level, that could be fixed - but they don't - because of a lack of comprehension. Sadly, in many cases where I offered solutions, even proofs, I hit a wall. I don't understand how a company that specifically caters to developers can be so ignorant to the needs and offerings of their willing customers.</span></span></span>