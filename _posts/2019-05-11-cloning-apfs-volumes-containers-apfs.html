---
layout: post
title: Cloning APFS Volumes & Containers ("APFS inverter failed")
date: '2019-05-11T17:13:00.000+01:00'
author: Thomas Tempelmann
tags:
- APFS
- OS X
modified_time: '2020-04-02T20:51:07.975+01:00'
blogger_id: tag:blogger.com,1999:blog-8797526579651167122.post-135171161540048527
blogger_orig_url: https://blog.tempel.org/2019/05/cloning-apfs-volumes-containers-apfs.html
---

<span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: x-small;"><i><b>(This is an older article that I hadn't published back then because it might not be fully accurate, i.e. the steps may not be applicable. Yet, it contains some valuable information so I decided to publish it now. Read with a grain of salt. If you have corrections, don't hesitate to comment or email me.)</b></i></span><br /><h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;">TL;DR</span></h2><blockquote class="tr_bq"><i><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">If Disk Utility fails to clone an APFS container, giving "APFS inverter failed" as error message, a work-around solution is to copy the partition with the "dd" command into a same-sized partition, then fix the cloned container's UUIDs.</span></i></blockquote><h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;">About cloning (copying) entire Mac volumes</span></h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">Usually, when you want to clone a Mac volume, you'd use Disk Utility's <i>Restore</i> operation. It performs a sector-by-sector&nbsp;copy (while skipping unused&nbsp;sector&nbsp;. The alternative would be to perform a file-by-file copy, as it's done by 3rd party tools like Carbon Copy Cloner.</span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"><br /></span> <span style="font-family: inherit;">A clone operation by copying individual files has several disadvantages over a&nbsp;sector&nbsp;copy:</span></span><br /><ul><li><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">It's much slower.</span></li><li><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">If you're using Finder Alias files, these may not work any more afterwards (that's because they rely on each file's unique ID, and those IDs change when copying files over to the destination).</span></li><li><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">More programs may request re-activation (re-registration).</span></li></ul><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">However, when I recently tried to make an identical copy of my macOS Mojave system from my MacBook Air (2015), copying it to an external SSD, I ran into problems:</span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">After the copy and verification operation was already apparently finished, an additional inverter process needs to be run on cloned APFS volumes. While I do understand that that's necessary when I copy only a single volume out of an APFS container, or copy the volume into a target APFS container without replacing it entirely, but even if I try to clone the entire container, with erasing the target, it still wants to run an inversion process - and that makes no sense to me.</span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">Now, the error that I kept seeing is: <i><b>APFS inverter failed to invert the volume</b></i></span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"><i><b><br /></b></i></span><span style="font-family: inherit;">And I'm not the only one, see <a href="https://discussions.apple.com/thread/8384650" target="_blank">here</a> and <a href="https://discussions.apple.com/thread/8413238" target="_blank">here</a>.</span></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">I tried many things, including First Aid and removal of all snapshots, and running the cmdline tool "asr", which showed me more detailed error messages. Still, no success. I keep getting variations of the same issue.</span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">What I'm showing now is a way to clone a complete APFS container (with all contained volumes) the way it should work.</span></div><h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;">How to clone an APFS container</span></h2><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;"><i>Note: This may not work with encrypted volumes. Or it might. I have not tried.</i></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;"><br /></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">We simply copy the entire partition (which contains the APFS container)&nbsp;sector&nbsp;by&nbsp;sector.&nbsp;(Small disadvantage over Disk Utility's Restore operation: This will also copy unused&nbsp;sectors, so it'll take a bit longer.)</span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span></div><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">Afterwards, we need to change the UUIDs of the cloned container and its volumes, or the Mac (and especially Disk Utility) may get confused when both the original and the cloned volumes are present on the same Mac.</span></div><h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;">Perform the sector copy operation</span></h2><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">In case you want to copy your bootable macOS system, you will have to first start up from a different macOS system. If you have no other external disk or partition with another macOS system, simply <a href="https://support.apple.com/en-us/HT201314" target="_blank">start up from the Recover system</a>.</span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"><br /></span><span style="font-family: inherit;">When ready, c</span>onnect the target disk, then&nbsp;<span style="font-family: inherit;">start Terminal.app.</span></span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"><br /></span><span style="font-family: inherit;">Get an overview of our disk names by entering (and always pressing Return afterwards):</span></span><br /><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">diskutil list</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"></span></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;">Here's a sample output of my Mac that has four partitions, two of which use HFS+ ("</span>AirElCap", "AirData")&nbsp;and the other two use APFS ("AirMojave", "AirHighSierra"):</span><br /><blockquote class="tr_bq"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"></span><br /></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">/dev/disk0 (internal):</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"></span></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; #: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE NAME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SIZE &nbsp; &nbsp; &nbsp; IDENTIFIER</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"></span></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 0:&nbsp; &nbsp; &nbsp; GUID_partition_scheme &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 121.3 GB &nbsp; disk0</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"></span></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 1:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; EFI EFI &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 314.6 MB &nbsp; disk0s1</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"></span></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 2: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Apple_APFS Container disk1 &nbsp; &nbsp; &nbsp; &nbsp; 40.9 GB&nbsp; &nbsp; disk0s2</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"></span></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 3:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Apple_HFS AirElCap&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20.1 GB&nbsp; &nbsp; disk0s3</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"></span></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 4: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Apple_Boot Boot OS X &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 134.2 MB &nbsp; disk0s4</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"></span><br /><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: inherit;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 5: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Apple_APFS Container disk2 &nbsp; &nbsp; &nbsp; &nbsp; 39.8 GB&nbsp; &nbsp; disk0s5</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"></span><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 6:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Apple_HFS AirData &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 19.9 GB&nbsp; &nbsp; disk0s6</span></span></div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><div style="font-size: 11px; font-stretch: normal; line-height: normal; min-height: 13px;"><span style="font-variant-ligatures: no-common-ligatures;"></span><br /></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">/dev/disk1 (synthesized):</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; #: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE NAME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SIZE &nbsp; &nbsp; &nbsp; IDENTIFIER</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 0:&nbsp; &nbsp; &nbsp; APFS Container Scheme -&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +40.9 GB&nbsp; &nbsp; disk1</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Physical Store disk0s2</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 1:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume AirMojave &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20.7 GB&nbsp; &nbsp; disk1s1</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 2:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume Preboot &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 47.1 MB&nbsp; &nbsp; disk1s2</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 3:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume Recovery&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512.7 MB &nbsp; disk1s3</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 4:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume VM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.1 GB &nbsp; &nbsp; disk1s4</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal; min-height: 13px;"><span style="font-variant-ligatures: no-common-ligatures;"></span><br /></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">/dev/disk2 (synthesized):</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; #: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TYPE NAME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SIZE &nbsp; &nbsp; &nbsp; IDENTIFIER</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 0:&nbsp; &nbsp; &nbsp; APFS Container Scheme -&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +39.8 GB&nbsp; &nbsp; disk2</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Physical Store disk0s5</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 1:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume AirHighSierra &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 23.2 GB&nbsp; &nbsp; disk2s1</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 2:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume Preboot &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20.9 MB&nbsp; &nbsp; disk2s2</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 3:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume Recovery&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 519.0 MB &nbsp; disk2s3</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-variant-ligatures: no-common-ligatures;">&nbsp;&nbsp; 4:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; APFS Volume VM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3.2 GB &nbsp; &nbsp; disk2s4</span></div><div><span style="font-variant-ligatures: no-common-ligatures;"><br /></span></div></span></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;">I plan to clone "</span>AirMojave", so the disk identifier would be <b>disk1</b>, because that is the container for that volume. In your case it may be a different identifier. I will write the commands below using <b>diskS</b>&nbsp;for the source container and <b>diskTsP</b> for the target partition.</span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-family: inherit;"><br /></span><span style="font-family: inherit;">Now unmount all volumes of our source container. In Terminal, enter:</span></span><br /><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">diskutil unmountDisk <b>diskS</b></span></div></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">If this does not succeed, then you either have programs or files open on one of the volumes or you're trying to unmount the boot volume (in that case, you should have restarted into a different system as explained above). Do not continue if the mount was not successful or you're likely to end up with a corrupted clone.</span><br /><div><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">diskutil apfs list diskS</span></div></blockquote><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">+-- Container disk2 5099518D-36C0-47CC-B034-0CDA52C51CE8</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">&nbsp; &nbsp; ====================================================</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">&nbsp; &nbsp; APFS Container Reference: &nbsp; &nbsp; disk2</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">&nbsp; &nbsp; Size (Capacity Ceiling): &nbsp; &nbsp; &nbsp;39838416896 B (39.8 GB)</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">&nbsp; &nbsp; Capacity In Use By Volumes: &nbsp; 27042205696 B (27.0 GB) (67.9% used)</span></div><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">&nbsp; &nbsp; Capacity Not Allocated: &nbsp; &nbsp; &nbsp; 12796211200 B (12.8 GB) (32.1% free)</span></div></blockquote><blockquote class="tr_bq"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-size: 11px;">sudo diskutil resizeVolume </span><b style="font-size: 11px;">diskTsP</b><span style="font-size: 11px;">&nbsp;</span><i style="font-size: 11px;">size</i></span></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">In place of <i>size</i>, use the number that's show after "Size (Capacity Ceiling):".</span><br /><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">diskutil unmount <b>diskTsP</b></span></div></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">This is the command that will perform the copying:</span><br /><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><span style="font-variant-ligatures: no-common-ligatures;">sudo dd</span>&nbsp;bs=65536 if=/dev/<b>diskS</b> of=/dev/<b>diskTsP</b></span></div></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">While <b>dd</b> is doing its work, it won't show any progress on its own. And it can take hours, even days. To check where it's at, <a href="https://stuff-things.net/2016/04/06/that-one-stupid-dd-trick-and-the-ballad-of-siginfo/" target="_blank">type ctrl-T</a> in the Terminal window. That will print a line showing its current progress.</span></div></div><h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;">Fix the UUIDs</span></h2><div><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">Enter in Terminal:</span><br /><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">sudo /System/Library/Filesystems/apfs.fs/Contents/Resources/apfs.util -s /dev/<b>diskT</b></span></div></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">You'll likely not get any response from this command, telling you success or failure.</span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">To check whether the UUIDs have been changed successfully, enter in Terminal:</span><br /><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">diskutil apfs list</span></div></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">In the output, find your source and target disks, and compare the UUIDs of their container and container volumes. They should all be different. If the UUIDs of source and target volumes show the same code, then the fix did not work. Try again.</span><br /><h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-size: small;">Make the system volume bootable</span></h2><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">The last step is to make the cloned volume bootable again (in case it was before). For that, you need to mount the Preboot volume, then rename the single folder inside, which contains the old UUID, into the new UUID of the main volume.</span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">To mount it:</span><br /><blockquote class="tr_bq" style="-webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; caret-color: rgb(0, 0, 0); color: black; font-family: -webkit-standard; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-decoration: none; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><div style="margin: 0px;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">diskutil mount&nbsp;<b>diskTsX</b></span></div></div></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">(X stands for the partition number containing the "Preboot" volume)</span><br /><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;"><br /></span><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">To show it in Finder:</span><br /><blockquote class="tr_bq"><div style="font-size: 11px; font-stretch: normal; line-height: normal;"><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif; font-variant-ligatures: no-common-ligatures;">open /Volumes/Preboot</span></div></blockquote><span style="font-family: &quot;arial&quot; , &quot;helvetica&quot; , sans-serif;">Now you should see a Finder window with a folder named after the UUID of the original volume you copied. Rename that folder into the new UUID. To verify that you used the correct UUID, open System Preferences, Startup Disk, select the cloned bootable volume and click the Restart button. If it says that it can't bless it, you got it wrong. Otherwise, the system should now restart, meaning the UUID was correctly set to a bootable volume.</span><br /><br /></div>